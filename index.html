<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El montage</title>
  <style>
    body { 
      font-family: sans-serif; 
      margin: 0; 
      padding: 20px; 
      background-color: #4169E1; 
      color: white; 
    }
    h1, h2 { text-align: center; margin: 10px 0; }
    .container { 
      max-width: 500px; 
      margin: auto; 
      padding: 20px; 
      background-color: rgba(255,255,255,0.05); 
      border-radius: 10px; 
    }
    .input-row { 
      display: flex; 
      flex-wrap: wrap; 
      align-items: center; 
      margin: 10px 0; 
    }
    .input-row label { 
      flex: 1 0 150px; 
      margin-right: 10px; 
      min-width: 120px;
    }
    .input-row input { 
      flex: 1 0 80px; 
      padding: 6px; 
      font-size: 1em; 
      border-radius: 5px; 
      border: none; 
    }
    .output { font-weight: bold; margin: 15px 0; font-size: 1.3em; }
    .error { color: #ffcccb; white-space: pre-wrap; margin-top: 10px; }
    footer { 
      text-align: center; 
      margin-top: 20px; 
      font-size: 0.8em; 
      color: rgba(255,255,255,0.7); 
    }
    @media (max-width: 400px) {
      .input-row { flex-direction: column; align-items: flex-start; }
      .input-row label { margin-bottom: 5px; }
      .input-row input { width: 100%; }
    }
  </style>
</head>
<body>
  <h1>El Rør Beregner</h1>
  <div class="container">
    <h2>Indtast Værdier:</h2>

    <div class="input-row">
      <label for="elementHojde">Element Højde (mm):</label>
      <input id="elementHojde" type="number">
    </div>
    <div class="input-row">
      <label for="offsetTop">Offset Top (mm):</label>
      <input id="offsetTop" type="number">
    </div>
    <div class="input-row">
      <label for="elTopRor">EL Højde / Top eldåse (mm):</label>
      <input id="elTopRor" type="number">
    </div>
    <div class="input-row">
      <label for="offsetBund">Offset Bund (mm):</label>
      <input id="offsetBund" type="number">
    </div>

    <div class="output" id="nedreRor">Nederste rør med dåse: - mm</div>
    <div class="output" id="ovreRor">Øverste rør til dåse: - mm</div>
    <div class="error" id="errorText"></div>
  </div>
  <footer>Made by Lars Nielsen</footer>

  <script>
    const felter = ['elementHojde','offsetTop','elTopRor','offsetBund'];

    // Hent gemte værdier fra LocalStorage
    felter.forEach(f => {
      const val = localStorage.getItem(f);
      if(val) document.getElementById(f).value = val;
    });

    function beregn() {
      const elementHojde = parseInt(document.getElementById('elementHojde').value) || 0;
      const offsetTop = parseInt(document.getElementById('offsetTop').value) || 0;
      const elTopRor = parseInt(document.getElementById('elTopRor').value) || 0;
      const offsetBund = parseInt(document.getElementById('offsetBund').value) || 0;

      // Gem i LocalStorage
      felter.forEach(f => localStorage.setItem(f, document.getElementById(f).value));

      // Validering
      let errors = '';
      if(elementHojde <=0) errors += 'Element Højde skal være positiv.\n';
      if(elTopRor <=0) errors += 'EL Højde skal være positiv.\n';
      if(offsetBund <0) errors += 'Offset Bund kan ikke være negativ.\n';
      if(offsetTop <0) errors += 'Offset Top kan ikke være negativ.\n';
      if(elTopRor >= elementHojde) errors += 'EL Højde kan ikke være større end eller lig med Element Højde.\n';

      // Beregninger
      const nedreRor = elTopRor - offsetBund;
      const ovreRor = elementHojde - elTopRor - offsetTop;

      // Opdater output
      document.getElementById('nedreRor').textContent = 'Nederste rør med dåse: ' + nedreRor + ' mm';
      document.getElementById('ovreRor').textContent = 'Øverste rør til dåse: ' + ovreRor + ' mm';
      document.getElementById('errorText').textContent = errors;
    }

    // Beregn live ved ændringer på inputfelter
    felter.forEach(f => {
      document.getElementById(f).addEventListener('input', beregn);
    });

    // Beregn en gang ved load
    beregn();
  </script>
</body>
</html>
