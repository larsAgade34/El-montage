<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El montage</title>
  <style>
    body { font-family: sans-serif; margin: 20px; background-color: #4169E1; color: white; }
    h1, h2 { text-align: center; }
    .container { max-width: 400px; margin: auto; }
    input { width: 100%; padding: 10px; margin: 5px 0; font-size: 1em; }
    .output { font-weight: bold; margin: 10px 0; }
    .error { color: #ffcccb; white-space: pre-wrap; margin-top: 10px; }
    footer { text-align: center; margin-top: 20px; font-size: 0.8em; color: rgba(255,255,255,0.7); }
  </style>
</head>
<body>
  <h1>El Rør Beregner</h1>
  <div class="container">
    <h2>Indtast Værdier:</h2>
    <input id="elementHojde" type="number" placeholder="Element Højde (mm)">
    <input id="elTopRor" type="number" placeholder="EL Højde / Top eldåse (mm)">
    <input id="offsetBund" type="number" placeholder="Offset Bund (mm)">
    <input id="offsetTop" type="number" placeholder="Offset Top (mm)">

    <div class="output" id="nedreRor">Nederste rør med dåse: - mm</div>
    <div class="output" id="ovreRor">Øverste rør til dåse: - mm</div>
    <div class="error" id="errorText"></div>
  </div>
  <footer>Made by Lars Nielsen</footer>

  <script>
    const felter = ['elementHojde','elTopRor','offsetBund','offsetTop'];

    // Hent gemte værdier fra LocalStorage
    felter.forEach(f => {
      const val = localStorage.getItem(f);
      if(val) document.getElementById(f).value = val;
    });

    function beregn() {
      const elementHojde = parseInt(document.getElementById('elementHojde').value) || 0;
      const elTopRor = parseInt(document.getElementById('elTopRor').value) || 0;
      const offsetBund = parseInt(document.getElementById('offsetBund').value) || 0;
      const offsetTop = parseInt(document.getElementById('offsetTop').value) || 0;

      // Gem i LocalStorage
      felter.forEach(f => localStorage.setItem(f, document.getElementById(f).value));

      // Validering
      let errors = '';
      if(elementHojde <=0) errors += 'Element Højde skal være positiv.\n';
      if(elTopRor <=0) errors += 'EL Højde skal være positiv.\n';
      if(offsetBund <0) errors += 'Offset Bund kan ikke være negativ.\n';
      if(offsetTop <0) errors += 'Offset Top kan ikke være negativ.\n';
      if(elTopRor >= elementHojde) errors += 'EL Højde kan ikke være større end eller lig med Element Højde.\n';

      // Beregninger
      const nedreRor = elTopRor - offsetBund;
      const ovreRor = elementHojde - elTopRor - offsetTop;

      // Opdater output
      document.getElementById('nedreRor').textContent = 'Nederste rør med dåse: ' + nedreRor + ' mm';
      document.getElementById('ovreRor').textContent = 'Øverste rør til dåse: ' + ovreRor + ' mm';
      document.getElementById('errorText').textContent = errors;
    }

    // Beregn live ved ændringer på inputfelter
    felter.forEach(f => {
      document.getElementById(f).addEventListener('input', beregn);
    });

    // Beregn en gang ved load
    beregn();
  </script>
</body>
</html>
